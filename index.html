<!DOCTYPE html>
<html lang="en" ng-app="myApp">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Details</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
</head>
<body ng-controller="TableController" class="container mt-4">
    <h3>Order Details</h3>
    <div class="btn margin_b5 margin_t5">
        <button class="btn btn-primary" data-toggle="modal" data-target="#addModal" ng-click="addRow()">Add Row</button>
    </div>
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>Order no</th>
                <th>Name</th>
                <th>Phone</th>
                <th>Address</th>
                <th>Status</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr ng-repeat="item in paginatedData">
                <td>{{ $index + 1 }}</td>
                <td>{{ item.name }}</td>
                <td>{{ item.phone }}</td>
                <td>{{ item.address }}</td>
                <td>{{ item.confirmed }}</td>
                <td>
                    <button class="btn btn-primary" data-toggle="modal" data-target="#editModal" ng-click="editItem(item)">Edit</button>
                    <button class="btn btn-danger" data-toggle="modal" data-target="#deleteModal" ng-click="deleteItem(item)">Delete</button>
                </td>
            </tr>
        </tbody>
    </table>
    <ul class="pagination">
        <li class="page-item"><a class="page-link" href="#" ng-click="setPage(currPage = 1)">&laquo;</a></li>
        <li class="page-item" ng-repeat="page in getPage()" ng-click="setPage(page)"><a class="page-link" href="#">{{page}}</a></li>
        <li class="page-item"><a class="page-link" href="#" ng-click="setPage(totalPages())">&raquo;</a></li>
    </ul>
    <div class="modal" id="editModal">
        <div class="modal-dialog">
            <div class="modal-content">      
                <div class="modal-header">
                    <h4 class="modal-title">Edit Row Details</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>      
                <div class="modal-body">
                    <div class="form-group">
                        <input type="text" class="form-control" id="editName" name="editName" placeholder="{{item.name}}" ng-model="editData.name" required>
                    </div>                
                    <div class="form-group">
                        <input type="text" class="form-control" id="editPhone" name="editPhone" placeholder="{{item.phone}}" ng-model="editData.phone" required>             
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" id="editAddress" name="editAddress" placeholder="{{item.address}}" ng-model="editData.address" required>               
                    </div>
                    <div class="form-group">
                        <label for="sel1">Select Status:</label>
                        <select class="form-control" id="sel1" ng-model="editData.status">
                            <option value="Pending">Pending</option>
                            <option value="Confirmed">Confirmed</option>
                            <option value="Completed">Completed</option>                          
                        </select>
                    </div>                    
                </div>      
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="save(item._id)">Save</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>              
                </div>      
            </div>
        </div>
    </div>
    <div class="modal" id="deleteModal">
        <div class="modal-dialog">
            <div class="modal-content">      
                <div class="modal-header">
                    <h4 class="modal-title">Delete Row</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>      
                <div class="modal-body">
                    <p>Are you sure you want to Delete?</p>                    
                </div>      
                <div class="modal-footer">
                    <button type="button" class="btn btn-warning" data-dismiss="modal" ng-click="delete(item._id)">Delete</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Cancel</button>              
                </div>      
            </div>
        </div>
    </div>
    <div class="modal" id="addModal">
        <div class="modal-dialog">
            <div class="modal-content">      
                <div class="modal-header">
                    <h4 class="modal-title">Add Row Details</h4>
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>      
                <div class="modal-body">
                    <div class="form-group">
                        <input type="text" class="form-control" id="AddId" placeholder="Order Id" ng-model="addData._id" required>
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" id="AddName" placeholder="Name" ng-model="addData.name" required>
                    </div>                
                    <div class="form-group">
                        <input type="text" class="form-control" id="AddPhone" placeholder="Phone" ng-model="addData.phone" required>             
                    </div>
                    <div class="form-group">
                        <input type="text" class="form-control" id="AddAddress"  placeholder="Address" ng-model="addData.address" required>               
                    </div>
                    <div class="form-group">
                        <label for="sel1">Select Status:</label>
                        <select class="form-control" id="sel1" ng-model="addData.status">
                            <option value="Pending">Pending</option>
                            <option value="Confirmed">Confirmed</option>
                            <option value="Completed">Completed</option>                          
                        </select>
                    </div>                    
                </div>      
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal" ng-click="saveRow()">Save</button>
                    <button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>              
                </div>      
            </div>
        </div>
    </div>      
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.2/angular.min.js"></script>
    <script src="herbcity.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>